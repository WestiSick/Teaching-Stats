<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Пары по предмету {{.Subject}} - Teaching Stats</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Подключаем внешние стили -->
    <link rel="stylesheet" href="/templates/static/css/main.css">
    <link rel="stylesheet" href="/templates/static/css/components.css">
    <link rel="stylesheet" href="/templates/static/css/tables.css">
    <link rel="stylesheet" href="/templates/static/css/layout.css">
    <link rel="stylesheet" href="/templates/static/css/utils.css">
</head>
<body>
<div class="container">
    <h1>Пары по предмету: {{.Subject}}</h1>

    <div class="table-container">
        <table>
            <thead>
            <tr>
                <th>Группа</th>
                <th>Тема</th>
                <th>Часы</th>
                <th>Тип</th>
                <th>Дата</th>
                <th>Действия</th>
            </tr>
            </thead>
            <tbody>
            {{range .Lessons}}
            <tr>
                <td>{{.GroupName}}</td>
                <td>{{.Topic}}</td>
                <td>{{.Hours}}</td>
                <td>{{.Type}}</td>
                <td>{{.Date}}</td>
                <td>
                    <a href="/lesson/edit/{{.ID}}">Редактировать</a>
                    <form method="POST" style="display:inline;" id="deleteForm{{.ID}}">
                        <input type="hidden" name="lesson_id" value="{{.ID}}">
                        <button type="button" class="delete-btn" data-lesson-id="{{.ID}}">Удалить</button>
                    </form>
                </td>
            </tr>
            {{end}}
            </tbody>
        </table>
    </div>

    <a class="back-link" href="/dashboard">Назад</a>
</div>

<div class="user-info">
    {{if .User.ID}}
    ФИО: {{.User.FIO}} | Роль: {{.User.Role}} | ID: {{.User.ID}}
    {{end}}
</div>

<!-- Подключаем внешние скрипты -->
<script src="/templates/static/js/main.js"></script>
<script>
    // Назначаем обработчики на кнопки удаления
    document.addEventListener('DOMContentLoaded', function() {
        document.querySelectorAll('.delete-btn').forEach(button => {
            button.addEventListener('click', function() {
                const lessonId = this.getAttribute('data-lesson-id');
                if (confirm('Вы уверены, что хотите удалить эту пару?')) {
                    const form = document.getElementById(`deleteForm${lessonId}`);
                    if (form) {
                        form.submit();
                    }
                }
            });
        });
    });
</script>
</body>
</html>