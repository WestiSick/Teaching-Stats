<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Логи действий - Teaching Stats</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <!-- Подключаем внешние стили -->
  <link rel="stylesheet" href="/templates/static/css/modernized.css">
</head>
<body>
<div class="container">
  <h1>Логи действий преподавателей</h1>

  <!-- User filter form -->
  <div class="filter-section">
    <div class="filter-header">Фильтры</div>
    <form method="GET" class="filter-form">
      <div class="filter-group">
        <label for="user-filter">Пользователь:</label>
        <select name="user_id" id="user-filter" class="filter-select">
          <option value="">-- Все пользователи --</option>
          {{range .UserList}}
          <option value="{{.ID}}" {{if eq (printf "%d" .ID) $.SelectedUserID}}selected{{end}}>{{.FIO}}</option>
          {{end}}
        </select>
      </div>
      {{if .Pagination.CurrentPage}}
      <input type="hidden" name="page" value="{{.Pagination.CurrentPage}}">
      {{end}}
      <div class="filter-actions">
        <button type="submit" class="filter-btn apply-btn">Применить</button>
        {{if .SelectedUserID}}
        <a href="/admin/logs" class="filter-btn reset-btn">Сбросить</a>
        {{end}}
      </div>
    </form>
  </div>

  <div class="table-container">
    <table>
      <thead>
      <tr>
        <th>Пользователь</th>
        <th>Действие</th>
        <th>Подробности</th>
        <th>Время</th>
      </tr>
      </thead>
      <tbody>
      {{range .Logs}}
      <tr>
        <td>{{.UserFIO}}</td>
        <td>{{.Action}}</td>
        <td>{{.Details}}</td>
        <td>{{.Timestamp}}</td>
      </tr>
      {{end}}
      </tbody>
    </table>
  </div>

  <!-- Pagination -->
  <div class="pagination">
    {{if .Pagination.HasPrev}}
    <a href="/admin/logs?page={{.Pagination.PrevPage}}{{if .SelectedUserID}}&user_id={{.SelectedUserID}}{{end}}" class="btn-page">&laquo; Предыдущая</a>
    {{else}}
    <span class="btn-page disabled">&laquo; Предыдущая</span>
    {{end}}

    <span class="page-info">Страница {{.Pagination.CurrentPage}} из {{.Pagination.TotalPages}}</span>

    {{if .Pagination.HasNext}}
    <a href="/admin/logs?page={{.Pagination.NextPage}}{{if .SelectedUserID}}&user_id={{.SelectedUserID}}{{end}}" class="btn-page">Следующая &raquo;</a>
    {{else}}
    <span class="btn-page disabled">Следующая &raquo;</span>
    {{end}}
  </div>

  <div class="link-group">
    <a class="btn btn-back" href="/admin">Назад к статистике</a>
    <a class="btn btn-users" href="/admin/users">Управление пользователями</a>
    <a class="btn btn-logout" href="/logout">Выйти</a>
  </div>
</div>

<div class="user-info">
  {{if .User.ID}}
  ФИО: {{.User.FIO}} | Роль: {{.User.Role}} | ID: {{.User.ID}}
  {{end}}
</div>

<!-- Подключаем внешние скрипты -->
<script src="/templates/static/js/main.js"></script>
</body>
</html>