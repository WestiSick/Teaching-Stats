<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ - Teacher Journal</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
  <!-- Include our modern dark CSS -->
  <link rel="stylesheet" href="/templates/static/css/modern-dark.css">
  <!-- Include any existing CSS as a fallback -->
  <link rel="stylesheet" href="/templates/static/css/modernized.css">
</head>
<body>
<div class="container">
  <h1>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h1>

  <div class="dashboard-stats">
    <div class="dashboard-card">
      <div class="dashboard-card-header">
        <h2 class="dashboard-card-title">–ü–∞—Ä—ã</h2>
        <div class="dashboard-card-icon">üìö</div>
      </div>
      <div class="dashboard-card-value">{{.TotalLessons}}</div>
      <div class="dashboard-card-label">–í—Å–µ–≥–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–æ –∑–∞–Ω—è—Ç–∏–π</div>
    </div>

    <div class="dashboard-card">
      <div class="dashboard-card-header">
        <h2 class="dashboard-card-title">–ß–∞—Å—ã</h2>
        <div class="dashboard-card-icon">‚è±Ô∏è</div>
      </div>
      <div class="dashboard-card-value">{{.TotalHours}}</div>
      <div class="dashboard-card-label">–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞—Å–æ–≤</div>
    </div>
  </div>

  {{if .HasLessons}}
  <div class="section">
    <h2>–ü–æ –ø—Ä–µ–¥–º–µ—Ç–∞–º:</h2>

    <div class="subject-list">
      {{range $subject, $count := .Subjects}}
      <div class="card subject-card">
        <div class="subject-header">
          <div class="subject-title">
            <strong>{{$subject}}</strong>
            <span class="badge badge-primary">{{$count}} –ø–∞—Ä</span>
          </div>
          <div class="subject-actions">
            <a href="/lessons/subject?subject={{$subject}}" class="btn btn-sm btn-secondary">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–∞—Ä—ã</a>
            <a href="/export?subject={{$subject}}" class="btn btn-sm btn-info">–í—ã–≥—Ä—É–∑–∏—Ç—å –ø–æ –ø—Ä–µ–¥–º–µ—Ç—É</a>
          </div>
        </div>

        <div class="subject-export mt-4">
          <form action="/export" method="GET" class="d-flex align-items-center gap-2">
            <input type="hidden" name="subject" value="{{$subject}}">
            <div class="form-group mb-0 w-full">
              <input type="text" name="group" list="groupList" placeholder="–í–≤–µ–¥–∏—Ç–µ –≥—Ä—É–ø–ø—É" class="form-control">
              <datalist id="groupList">
                {{range $.Groups}}
                <option value="{{.}}">
                  {{end}}
              </datalist>
            </div>
            <button type="submit" class="btn btn-sm btn-success">–í—ã–≥—Ä—É–∑–∏—Ç—å –ø–æ –≥—Ä—É–ø–ø–µ</button>
          </form>
        </div>
      </div>
      {{end}}
    </div>
  </div>
  {{else}}
  <div class="empty-state card text-center p-6">
    <div class="empty-state-icon mb-4">üìù</div>
    <h3>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –ø–∞—Ä</h3>
    <p class="text-muted mb-4">–ù–∞—á–Ω–∏—Ç–µ —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤–∞—à–µ–π –ø–µ—Ä–≤–æ–π –ø–∞—Ä—ã</p>
    <a href="/lesson/add" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä—É</a>
  </div>
  {{end}}

  <div class="btn-group">
    {{if .HasLessons}}
    <a class="btn btn-primary" href="/lesson/add">
      <span>üìù</span> –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä—É
    </a>
    <a class="btn btn-secondary" href="/groups">
      <span>üë•</span> –ì—Ä—É–ø–ø—ã
    </a>
    <a class="btn btn-info" href="/attendance">
      <span>‚úì</span> –ü–æ—Å–µ—â–µ–Ω–∏—è
    </a>
    <a class="btn btn-success" href="/labs">
      <span>üß™</span> –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—ã–µ —Ä–∞–±–æ—Ç—ã
    </a>
    {{end}}
    <a class="btn btn-secondary" href="/schedule">
      <span>üìÖ</span> –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ
    </a>
    <a class="btn btn-warning" href="/tickets">
      <span>üé´</span> –¢–∏–∫–µ—Ç—ã
    </a>
    <a class="btn btn-danger" href="/logout">
      <span>üö™</span> –í—ã–π—Ç–∏
    </a>
    {{if eq .User.Role "admin"}}
    <a class="btn btn-primary" href="/admin">
      <span>‚öôÔ∏è</span> –ê–¥–º–∏–Ω–∫–∞
    </a>
    {{end}}
  </div>
</div>

<div class="user-info">
  {{if .User.ID}}
  –§–ò–û: {{.User.FIO}} | –†–æ–ª—å: {{.User.Role}} | ID: {{.User.ID}}
  {{end}}
</div>

<!-- Add JavaScript files at the bottom -->
<script src="/templates/static/js/main.js"></script>
</body>
</html>